import{r as Q,S as L,a as J,c as Z,b as ee,d as te,e as ae,f as A,g as h,M as b,h as y,o as d,i as oe,w as P,j as s,t as f,k as u,l as k,v as se,F as R,m as ne,n as $,p as K,q as C,s as w,u as U,x,y as B,z as re,A as N,B as ce,C as ie,D as le,E as de}from"./vendor.1d610a41.js";const ue=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}};ue();const i=Q({user:{},account:{},keeps:[],activeKeep:{},vaults:[],activeVault:{},vaultKeeps:[],profile:{},profileKeeps:[],profileVaults:[],myVaults:[],isMe:!1});class v{static async confirm(e="Are you sure?",a="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await L.fire({title:e,text:a,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",a="warning",t="top-end",r=3e3,c=!0){L.fire({title:e,icon:a,position:t,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var a;if(e.isAxiosError){const{response:t}=e;this.toast(((a=t.data.error)==null?void 0:a.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const D=window.location.origin.includes("localhost"),j=D?"https://localhost:5001":"",_e="dev-kpqs6nam.us.auth0.com",me="https://TobyDev.com",pe="Ets60VsVsIMAIrrwUachpNXC3rBdIpFX";function E(o,e){if(D)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){E("log",arguments)},error(){E("error",arguments)},warn(){E("warn",arguments)},assert(){E("assert",arguments)},trace(){E("trace",arguments)}},m=J.create({baseURL:j,timeout:8e3});class ve{async getAll(){const e=await m.get("api/keeps");_.log("[GET ALL KEEPS]",e.data),i.keeps=e.data}async getKeepById(e){await m.get("api/keeps/"+e.id),e.views++,i.activeKeep=e}async getVaultKeeps(e){const a=await m.get(`api/vaults/${e}/keeps`);_.log("[VAULT KEEPS]",a.data),i.vaultKeeps=a.data}async getKeepsByProfileId(e){const a=await m.get(`api/profiles/${e}/keeps`);_.log("[PROFILE KEEPS]",a.data),i.profileKeeps=a.data}async create(e){const a=await m.post("api/keeps",e);return i.profileKeeps.unshift(a.data),a.data}async remove(e){await m.delete(`api/keeps/${e}`)}}const T=new ve;class ge{async add(e){await m.post("api/vaultKeeps",e),T.getVaultKeeps(e.vaultId)}async remove(e){await m.delete("api/vaultKeeps/"+e),i.vaultKeeps=i.vaultKeeps.filter(a=>a.vaultKeepId!=e)}}const q=new ge,fe="modulepreload",F={},he="/",V=function(e,a){return!a||a.length===0?e():Promise.all(a.map(t=>{if(t=`${he}${t}`,t in F)return;F[t]=!0;const r=t.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${c}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":fe,r||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),r)return new Promise((l,I)=>{n.addEventListener("load",l),n.addEventListener("error",I)})})).then(()=>e())};function be(o){switch(o){case"./pages/AboutPage.vue":return V(()=>import("./AboutPage.71729f08.js"),["assets/AboutPage.71729f08.js","assets/vendor.1d610a41.js"]);case"./pages/AccountPage.vue":return V(()=>import("./AccountPage.2e6dccb5.js"),["assets/AccountPage.2e6dccb5.js","assets/AccountPage.1d38451d.css","assets/vendor.1d610a41.js"]);case"./pages/HomePage.vue":return V(()=>import("./HomePage.62050af5.js"),["assets/HomePage.62050af5.js","assets/HomePage.41e27819.css","assets/vendor.1d610a41.js"]);case"./pages/ProfilePage.vue":return V(()=>import("./ProfilePage.ef755fd3.js"),["assets/ProfilePage.ef755fd3.js","assets/ProfilePage.4c804122.css","assets/vendor.1d610a41.js"]);case"./pages/VaultPage.vue":return V(()=>import("./VaultPage.ea40e857.js"),["assets/VaultPage.ea40e857.js","assets/VaultPage.f1775dff.css","assets/vendor.1d610a41.js"]);default:return new Promise(function(e,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function S(o){return()=>be(`./pages/${o}.vue`)}const ye=[{path:"/",name:"Home",component:S("HomePage")},{path:"/about",name:"About",component:S("AboutPage")},{path:"/account",name:"Account",component:S("AccountPage"),beforeEnter:te},{path:"/profiles/:id",name:"Profile",component:S("ProfilePage")},{path:"/vaults/:id",name:"Vault",component:S("VaultPage"),beforeEnter:ae}],O=Z({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:ee(),routes:ye});var ke="/assets/Keep.589514cf.png";var g=(o,e)=>{for(const[a,t]of e)o[a]=t;return o};const we={setup(){const o=A(0);return{vaultId:o,account:h(()=>i.account),keep:h(()=>i.activeKeep),vaults:h(()=>i.myVaults),inUserVault:h(()=>{}),async add(){try{const e={keepId:i.activeKeep.id,vaultId:o.value};await q.add(e),v.toast("Added","success"),b.getOrCreateInstance(document.getElementById("keep-modal")).hide(),O.push({name:"Vault",params:{id:o.value}}),o.value=0}catch(e){_.error(e),v.toast(e.message,"error")}},async deleteKeep(){try{await v.confirm()&&(await T.remove(i.activeKeep.id),b.getOrCreateInstance(document.getElementById("keep-modal")).hide(),v.toast("Removed","success"))}catch(e){_.error(e),v.toast(e.message,"error")}},async remove(){try{await v.confirm()&&(await q.remove(i.activeKeep.vaultKeepId),b.getOrCreateInstance(document.getElementById("keep-modal")).hide(),v.toast("Removed","success"))}catch(e){_.error(e),v.toast(e.message,"error")}}}}},M=o=>(K("data-v-6c3e961c"),o=o(),C(),o),xe={class:"container-fluid position-relative"},Ee=M(()=>s("button",{type:"button",class:"btn-close close-button position-absolute","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Ve={class:"row"},Se={class:"col-md-6 col-12 p-0"},Te=["src"],Ie={class:"col-md-6 col-12 p-5"},Ae={class:"d-flex flex-column justify-content-center ms-3"},Pe={title:"Views",class:"mdi mdi-eye mdi-36px d-flex"},$e={class:"mt-3 ms-3"},Ke=M(()=>s("img",{title:"Times Kept",class:"keep",src:ke,alt:""},null,-1)),Ce={class:"mt-3 ms-2"},Oe={class:"border-bottom border-dark d-flex justify-content-between"},Me={class:""},Le={class:"mt-3"},Re={key:0},Ue={key:1,class:"text-start"},Be=["value"],Ne=M(()=>s("i",{class:"mdi mdi-trash-can-outline mdi-24px"},null,-1)),De=[Ne];function je(o,e,a,t,r,c){const n=y("Modal");return d(),oe(n,{id:"keep-modal"},{"modal-body":P(()=>[s("div",xe,[Ee,s("div",Ve,[s("div",Se,[s("img",{class:"object-fit w-100 rounded-start",src:t.keep.img,alt:""},null,8,Te)]),s("div",Ie,[s("div",Ae,[s("div",Pe,[s("h5",$e,f(t.keep.views),1),Ke,s("h5",Ce,f(t.keep.kept),1)]),s("div",Oe,[s("h1",Me,f(t.keep.name),1)]),s("p",Le,f(t.keep.description),1)]),t.keep.creatorId==t.account.id&&t.keep.vaultKeepId?(d(),u("div",Re,[s("button",{class:"btn btn-outline-primary",onClick:e[0]||(e[0]=(...l)=>t.remove&&t.remove(...l))}," REMOVE FROM VAULT ")])):t.account.id?(d(),u("div",Ue,[k(s("select",{class:"form-control",name:"vault",id:"vault","onUpdate:modelValue":e[1]||(e[1]=l=>t.vaultId=l)},[(d(!0),u(R,null,ne(t.vaults,l=>(d(),u("option",{key:l.id,value:l.id},f(l.name),9,Be))),128))],512),[[se,t.vaultId]]),s("button",{class:"btn btn-outline-success ease-in-out",onClick:e[2]||(e[2]=(...l)=>t.add&&t.add(...l))}," ADD TO VAULT ")])):$("",!0),t.keep.creatorId==t.account.id?(d(),u("button",{key:2,onClick:e[3]||(e[3]=(...l)=>t.deleteKeep&&t.deleteKeep(...l)),class:"btn btn-danger"},De)):$("",!0)])])])]),_:1})}var z=g(we,[["render",je],["__scopeId","data-v-6c3e961c"]]),qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:z});const Fe={name:"App",setup(){return{appState:h(()=>i)}},components:{KeepModal:z}};function ze(o,e,a,t,r,c){const n=y("Navbar"),l=y("router-view"),I=y("KeepModal");return d(),u(R,null,[s("header",null,[w(n)]),s("main",null,[w(l),w(I)])],64)}var He=g(Fe,[["render",ze]]);const Ye={props:{keep:{type:Object,required:!0}},setup(o){const e=U();return{goToProfile(){b.getOrCreateInstance(document.getElementById("keep-modal")).hide(),e.push({name:"Profile",params:{id:o.keep.creatorId}})},setActive(){try{T.getKeepById(o.keep),b.getOrCreateInstance(document.getElementById("keep-modal")).show()}catch(a){_.error(a),v.toast(a.message,"error")}}}}},We={class:"keep text-white my-5 selectable"},Ge={class:"keepp"},Xe=["src"],Qe={class:"text-light title"},Je=["src"];function Ze(o,e,a,t,r,c){return d(),u("div",We,[s("div",Ge,[s("img",{onClick:e[0]||(e[0]=(...n)=>t.setActive&&t.setActive(...n)),class:"card rounded img-fluid shadow",src:a.keep.img,alt:""},null,8,Xe),s("h5",Qe,f(a.keep.name),1),s("img",{onClick:e[1]||(e[1]=(...n)=>t.goToProfile&&t.goToProfile(...n)),class:"pfp selectable",src:a.keep.creator.picture,alt:""},null,8,Je)])])}var et=g(Ye,[["render",Ze],["__scopeId","data-v-f87eb080"]]),tt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:et});const at={setup(){const o=A({});return{editable:o,async create(){try{await T.create(o.value),b.getOrCreateInstance(document.getElementById("newKeepModal")).hide()}catch(e){_.error(e),v.toast(e.message,"error")}}}}},ot={class:"container"},st={class:"mb-3"},nt=s("label",{for:"name",class:"form-label"},null,-1),rt={class:"mb-3"},ct=s("label",{for:"img",class:"form-label"},null,-1),it={class:"mb-3"},lt=s("label",{for:"description",class:"form-label"},null,-1),dt=s("button",{class:"btn btn-success",type:"submit"},"Submit",-1);function ut(o,e,a,t,r,c){return d(),u("div",ot,[s("form",{onSubmit:e[3]||(e[3]=B((...n)=>t.create&&t.create(...n),["prevent"])),id:"keepForm",class:"text-center"},[s("div",st,[nt,k(s("input",{type:"text",class:"form-control",name:"name",id:"name",placeholder:"Title...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[x,t.editable.name]])]),s("div",rt,[ct,k(s("input",{type:"text",class:"form-control",name:"img",id:"img","aria-describedby":"helpId",placeholder:"URL...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.img=n),required:""},null,512),[[x,t.editable.img]])]),s("div",it,[lt,k(s("textarea",{name:"description",id:"description",cols:"30",rows:"10","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.description=n)},null,512),[[x,t.editable.description]])]),dt],32)])}var _t=g(at,[["render",ut]]),mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_t});class pt{async getAccount(){try{const e=await m.get("/account");i.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getMyVaults(){try{const e=await m.get("/account/vaults");i.myVaults=e.data}catch{_.log("MyVaults Error",err)}}}const H=new pt,vt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class gt{constructor(e=!1,a=j){}on(e,a){var t;return(t=this.socket)==null||t.on(e,a.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var a;(a=this.socket)==null||a.emit(vt.authenticate,e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,a){_.log("[ENQUEING_ACTION]",{action:e,payload:a}),this.queue.push({action:e,payload:a})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(a=>{this.emit(a.action,a.payload)})}emit(e,a=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,a);if(!this.connected)return this.enqueue(e,a);this.socket.emit(e,a)}}class ft extends gt{constructor(){super();this.on("error",this.onError)}onError(e){v.toast(e.message,"error")}}const Y=new ft;class ht{async getVaultsByProfileId(e){const a=await m.get(`api/profiles/${e}/vaults`);_.log("[PROFILE VAULTS]",a.data),i.profileVaults=a.data}async getMyVaults(e){const a=await m.get("account/vaults");return i.myVaults=a.data,a.data}async create(e){const a=await m.post("api/vaults",e);return i.myVaults.unshift(a.data),a.data}async remove(e){await m.delete(`api/vaults/${e}`)}}const bt=new ht,p=re({domain:_e,clientId:pe,audience:me,useRefreshTokens:!0,onRedirectCallback:o=>{O.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});p.on(p.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=p.bearer,m.interceptors.request.use(yt),i.user=p.user,await H.getAccount(),Y.authenticate(p.bearer),await H.getMyVaults()});async function yt(o){if(!p.isAuthenticated)return o;const e=p.identity.exp*1e3,a=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return a?await p.loginWithPopup():t&&(await p.getTokenSilently(),m.defaults.headers.authorization=p.bearer,Y.authenticate(p.bearer)),o}const kt={setup(){return{user:h(()=>i.user),account:h(()=>i.account),async login(){p.loginWithPopup()},async logout(){p.logout({returnTo:window.location.origin})}}}},W=o=>(K("data-v-a9e0f51a"),o=o(),C(),o),wt={class:"navbar-text"},xt={key:1,class:"dropdown my-2 my-lg-0"},Et={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Vt={key:0},St=["src"],Tt={class:"mx-3 text-success lighten-30"},It={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},At=W(()=>s("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),Pt=W(()=>s("i",{class:"mdi mdi-logout"},null,-1)),$t=N(" logout "),Kt=[Pt,$t];function Ct(o,e,a,t,r,c){const n=y("router-link");return d(),u("span",wt,[t.user.isAuthenticated?(d(),u("div",xt,[s("div",Et,[t.account.picture?(d(),u("div",Vt,[s("img",{src:t.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,St),s("span",Tt,f(t.account.name),1)])):$("",!0)]),s("div",It,[w(n,{to:{name:"Profile",params:{id:t.account.id}}},{default:P(()=>[At]),_:1},8,["to"]),s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...l)=>t.logout&&t.logout(...l))},Kt)])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...l)=>t.login&&t.login(...l))}," Login "))])}var Ot=g(kt,[["render",Ct],["__scopeId","data-v-a9e0f51a"]]),Mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ot});const Lt={},Rt={class:"modal fade"},Ut={class:"modal-dialog modal-xl modal-dialog-centered"},Bt={class:"modal-content"},Nt={class:"modal-body p-0"};function Dt(o,e){return d(),u("div",Rt,[s("div",Ut,[s("div",Bt,[s("div",Nt,[ce(o.$slots,"modal-body")])])])])}var jt=g(Lt,[["render",Dt]]),qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jt}),Ft="/assets/Keepr.f3019598.png";const zt={setup(){return{}}},G=o=>(K("data-v-71209cec"),o=o(),C(),o),Ht={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},Yt=G(()=>s("div",{class:"d-flex flex-column align-items-center"},[s("img",{alt:"logo",src:Ft,height:"150",width:"150"})],-1)),Wt=ie('<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation" data-v-71209cec><span class="navbar-toggler-icon" data-v-71209cec></span></button><div class="container-fluid justify-content-center text-success lighten-30" data-v-71209cec><div class="bg-dark text-success title" data-v-71209cec><div class="letter" data-v-71209cec>K</div><div class="letter" data-v-71209cec>E</div><div class="letter" data-v-71209cec>E</div><div class="letter" data-v-71209cec>P</div><div class="letter" data-v-71209cec>R</div></div></div>',2),Gt={class:"collapse navbar-collapse",id:"navbarText"},Xt=G(()=>s("ul",{class:"navbar-nav me-auto"},null,-1));function Qt(o,e,a,t,r,c){const n=y("router-link"),l=y("Login");return d(),u("nav",Ht,[w(n,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:P(()=>[Yt]),_:1}),Wt,s("div",Gt,[Xt,w(l)])])}var Jt=g(zt,[["render",Qt],["__scopeId","data-v-71209cec"]]),Zt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jt});const ea={props:{vault:{type:Object,required:!0}},setup(o){const e=U();return{goToVault(){i.activeVault=o.vault,e.push({name:"Vault",params:{id:o.vault.id}})}}}},ta={class:"vaultt"},aa=["src"],oa={key:1,class:"img-fluid shadow rounded-2",src:"https://thiscatdoesnotexist.com",alt:""},sa={class:"text-light title"};function na(o,e,a,t,r,c){return d(),u("div",{class:"vault shadow my-2 mx-3 selectable p-0",onClick:e[0]||(e[0]=(...n)=>t.goToVault&&t.goToVault(...n))},[s("div",ta,[a.vault.image!=null?(d(),u("img",{key:0,class:"img-fluid shadow",src:a.vault.image,alt:""},null,8,aa)):(d(),u("img",oa)),s("h5",sa,f(a.vault.name),1)])])}var ra=g(ea,[["render",na],["__scopeId","data-v-458a734c"]]),ca=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ra});const ia={setup(){const o=A({});return{editable:o,async create(){try{await bt.create(o.value),b.getOrCreateInstance(document.getElementById("newVaultModal")).toggle()}catch(e){_.error(e),v.toast(e.message,"error")}}}}},la={class:"container"},da={class:"mb-3"},ua=s("label",{for:"name",class:"form-label"},null,-1),_a={class:"mb-3"},ma=s("label",{for:"img",class:"form-label"},null,-1),pa={class:"text-start mb-3 form-check"},va=s("label",{for:"isPrivate",class:"form-label"},[N("Private? "),s("br"),s("figure",{class:"text-start mt-3"},[s("figcaption",{class:"blockquote-footer"},[s("cite",{title:"Private Vaults can only be seen by you "},"Private Vaults can only be seen by you ")])])],-1),ga=s("button",{class:"btn btn-success",type:"submit"},"Submit",-1);function fa(o,e,a,t,r,c){return d(),u("div",la,[s("form",{onSubmit:e[3]||(e[3]=B((...n)=>t.create&&t.create(...n),["prevent"])),id:"vaultForm",class:"text-center"},[s("div",da,[ua,k(s("input",{type:"text",class:"form-control",name:"name",id:"name",placeholder:"Title...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[x,t.editable.name]])]),s("div",_a,[ma,k(s("input",{type:"text",class:"form-control",name:"img",id:"img","aria-describedby":"helpId",placeholder:"URL...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.img=n)},null,512),[[x,t.editable.img]])]),s("div",pa,[va,k(s("input",{type:"checkbox",class:"me-4 form-check-input",name:"isPrivate",id:"isPrivate","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.isPrivate=n)},null,512),[[le,t.editable.isPrivate]])]),ga],32)])}var ha=g(ia,[["render",fa]]),ba=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ha});function ya(o){Object.entries({"./components/Keep.vue":tt,"./components/KeepForm.vue":mt,"./components/KeepModal.vue":qe,"./components/Login.vue":Mt,"./components/Modal.vue":qt,"./components/Navbar.vue":Zt,"./components/Vault.vue":ca,"./components/VaultForm.vue":ba}).forEach(([a,t])=>{const r=t.name||a.substr(a.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(r,t.default)})}const X=de(He);ya(X);X.use(O).mount("#app");export{i as A,v as P,g as _,m as a,T as k,_ as l,bt as v};
